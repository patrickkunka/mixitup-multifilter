/**!
 * MixItUp MultiFilter v3.0.0-beta
 * A UI-builder for powerful multi-attribute filtering
 * Build 397fa23b-a65a-41e9-97d4-f7769d7f8fc4
 *
 * Requires mixitup.js >= v3.0.0
 *
 * @copyright Copyright 2014-2016 KunkaLabs Limited.
 * @author    KunkaLabs Limited.
 * @link      https://www.kunkalabs.com/mixitup-multifilter/
 *
 * @license   Commercial use requires a commercial license.
 *            https://www.kunkalabs.com/mixitup-multifilter/licenses/
 *
 *            Non-commercial use permitted under same terms as  license.
 *            http://creativecommons.org/licenses/by-nc/3.0/
 */
!function(t){"use strict";var e=function(t){var i=t.h;if(!t.CORE_VERSION||!i.compareVersions(e.REQUIRE_CORE_VERSION,t.CORE_VERSION))throw new Error("[MixItUp-Multifilter] MixItUp Pagination v"+e.EXTENSION_VERSION+" requires at least MixItUp v"+e.REQUIRE_CORE_VERSION);t.ConfigMultifilter=function(){this.enable=!1,this.logicWithinGroup="or",this.logicBetweenGroups="and",this.minSearchLength=3,i.seal(this)},t.Config.registerAction("beforeConstruct","multifilter",function(){this.multifilter=new t.ConfigMultifilter}),t.MultifilterFormEventTracker=function(){this.form=null,this.totalBound=0,this.totalHandled=0,i.seal(this)},t.FilterGroupDom=function(){this.el=null,this.form=null,i.seal(this)},t.FilterGroup=function(){this.dom=new t.FilterGroupDom,this.activeSelectors=[],this.activeToggles=[],this.handler=null,this.mixer=null,this.logic="or",this.parseOn="change",i.seal(this)},i.extend(t.FilterGroup.prototype,{init:function(t,e){var i=this,r=t.getAttribute("data-logic");i.dom.el=t,i.cacheDom(),i.mixer=e,(r&&"and"===r.toLowerCase()||"and"===e.config.multifilter.logicWithinGroup)&&(i.logic="and"),i.bindEvents()},cacheDom:function(){var t=this;t.dom.form=i.closestParent(t.dom.el,"form")},bindEvents:function(){var t=this;t.handler=function(e){switch(e.type){case"reset":case"submit":t.handleFormEvent(e);break;default:t["handle"+i.pascalCase(e.type)](e)}},i.on(t.dom.el,"click",t.handler),i.on(t.dom.el,"change",t.handler),t.dom.form&&(i.on(t.dom.form,"reset",t.handler),i.on(t.dom.form,"submit",t.handler))},unbindEvents:function(){var t=this;i.off(t.dom.el,"click",t.handler),i.off(t.dom.el,"change",t.handler),t.dom.form&&(i.off(t.dom.form,"reset",t.handler),i.off(t.dom.form,"submit",t.handler)),t.handler=null},handleClick:function(t){var e=this,r=i.closestParent(t.target,"[data-filter], [data-toggle]",!0),o=-1,l="";r&&(t.stopPropagation(),r.matches("[data-filter]")?(l=r.getAttribute("data-filter"),e.activeSelectors=[l]):r.matches("[data-toggle]")&&(l=r.getAttribute("data-toggle"),(o=e.activeToggles.indexOf(l))>-1?e.activeToggles.splice(o,1):e.activeToggles.push(l),"and"===e.logic?e.activeSelectors=[e.activeToggles]:e.activeSelectors=e.activeToggles),e.updateControls(),"change"===e.mixer.config.multifilter.parseOn&&e.mixer.parseMultifilters())},handleChange:function(t){var e=this,i=t.target;switch(t.stopPropagation(),i.type){case"text":case"search":case"password":case"select-one":case"radio":e.getSingleValue(i);break;case"checkbox":case"select-multiple":e.getMultipleValues(i)}"change"===e.mixer.config.multifilter.parseOn&&e.mixer.parseMultifilters()},handleFormEvent:function(e){var i=this,r=null,o=null,l=-1;if("reset"===e.type&&(i.activeToggles=[],i.activeSelectors=[],i.updateControls()),i.mixer.multifilterFormEventTracker)r=i.mixer.multifilterFormEventTracker;else for(r=i.mixer.multifilterFormEventTracker=new t.MultifilterFormEventTracker,r.form=e.target,l=0;o=i.mixer.filterGroups[l];l++)o.dom.form===e.target&&r.totalBound++;e.target===r.form&&(r.totalHandled++,r.totalHandled===r.totalBound&&(i.mixer.multifilterFormEventTracker=null,"change"===i.mixer.config.multifilter.parseOn&&i.mixer.parseMultifilters()))},getSingleValue:function(t){var e=this;t.value&&(e.activeSelectors=[t.value])},getMultipleValues:function(t){var e=this,i=[],r="",o=null,l=null,n=-1;switch(t.type){case"checkbox":r='input[type="checkbox"]';break;case"select-multiple":r="option"}for(l=e.dom.el.querySelectorAll(r),n=0;o=l[n];n++)(o.checked||o.selected)&&o.value&&i.push(o.value);"and"===e.logic&&(i=[i]),e.activeSelectors=i},updateControls:function(){var t=this,e=t.dom.el.querySelectorAll("[data-filter], [data-toggle]"),i=null,r="filter",o=-1;for(o=0;i=e[o];o++)i.getAttribute("data-toggle")&&(r="toggle"),t.updateControl(i,r)},updateControl:function(t,e){var r=this,o=t.getAttribute("data-"+e),l="";l=i.getClassname(r.mixer.config.classNames,e,r.mixer.config.classNames.modifierActive),r.activeSelectors.indexOf(o)>-1?i.addClass(t,l):i.removeClass(t,l)}}),t.MixerDom.registerAction("afterConstruct","multifilter",function(){this.filterGroups=[]}),t.Mixer.registerAction("afterConstruct","multifilter",function(){this.filterGroups=[],this.multifilterFormEventTracker=null}),t.Mixer.registerAction("afterCacheDom","multifilter",function(){var e=this,i=null;if(e.config.multifilter.enable){switch(e.config.controls.scope){case"local":i=e.dom.container;break;case"global":i=e.dom.document;break;default:throw new Error(t.messages.ERROR_CONFIG_INVALID_CONTROLS_SCOPE)}e.dom.filterGroups=i.querySelectorAll("[data-filter-group]")}}),t.Mixer.registerAction("beforeInitControls","multifilter",function(){var t=this;t.config.multifilter.enable&&(t.config.controls.live=!0)}),t.Mixer.registerAction("afterSanitizeConfig","multifilter",function(){var t=this;t.config.multifilter.logicBetweenGroups=t.config.multifilter.logicBetweenGroups.toLowerCase().trim(),t.config.multifilter.logicWithinGroups=t.config.multifilter.logicWithinGroups.toLowerCase().trim()}),t.Mixer.registerAction("afterAttach","multifilter",function(){var t=this;t.dom.filterGroups.length&&t.indexFilterGroups()}),t.Mixer.registerAction("afterUpdateControls","multifilter",function(){var t=this,e=null,i=-1;for(i=0;e=t.filterGroups[i];i++)e.updateControls()}),t.Mixer.extend({indexFilterGroups:function(){var e=this,i=null,r=null,o=-1;for(o=0;r=e.dom.filterGroups[o];o++)i=new t.FilterGroup,i.init(r,e),e.filterGroups.push(i)},parseFilterGroups:function(){var t=this,e=t.getFilterGroupPaths(),i=t.buildSelectorFromPaths(e);return""===i&&(i=t.config.controls.toggleDefault),t.filter(i)},getFilterGroupPaths:function(){var t=this,e=null,r=null,o=null,l=[],n=[],a=[],s=-1;for(s=0;s<t.filterGroups.length;s++)(o=t.filterGroups[s].activeSelectors).length&&(l.push(o),a.push(0));return e=function(){var t=null,e=[],r=-1;for(r=0;r<l.length;r++)t=l[r][a[r]],Array.isArray(t)&&(t=t.join("")),e.push(t);e=i.clean(e),n.push(e)},r=function(t){t=t||0;for(var i=l[t];a[t]<i.length;)t<l.length-1?r(t+1):e(),a[t]++;a[t]=0},l.length?(r(),n):""},buildSelectorFromPaths:function(t){var e=this,i=null,r=[],o="",l="",n=-1;if(!t.length)return"";if("or"===e.config.multifilter.logicBetweenGroups&&(l=", "),t.length>1){for(n=0;n<t.length;n++)i=t[n],o=i.join(l),r.indexOf(o)<0&&r.push(o);return r.join(", ")}return t[0].join(l)}}),t.Facade.registerAction("afterConstruct","pagination",function(t){this.parseFilterGroups=t.parseFilterGroups.bind(t)})};if(e.TYPE="mixitup-extension",e.NAME="mixitup-multifilter",e.EXTENSION_VERSION="3.0.0-beta",e.REQUIRE_CORE_VERSION="3.0.0","object"==typeof exports&&"object"==typeof module)module.exports=e;else if("function"==typeof define&&define.amd)define(function(){return e});else{if(!t.mixitup||"function"!=typeof t.mixitup)throw new Error("[MixItUp MultiFilter] MixItUp core not found");e(t.mixitup)}}(window);